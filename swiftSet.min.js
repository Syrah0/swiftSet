(function(e,t){"use strict";function n(){return"swiftSet v0.9.10"}function s(e,t){this.item=e;this.toString=t?t:function(){return"("+e+":"+i(e)+")"}}function o(e){return function(t){return new s(t,e)}}function u(e){return e instanceof s}function a(e,t){var n=new f(e,t),i=n.items();this.process=function(e,n){var r=e instanceof a?e.items():e,s=[],o=new f(i,t),e=(new f(r,t)).normalize(2);o.merge(e);if(n){o.each(function(e,t){n(t)&&s.push(e)});return s}else{return o}};this.each=function(e,t){return n.each(function(t){return e.call(this,t)},t)};this.items=function(){return n.items()};this.unwrap=function(){return n.unwrap()};this.keyify=function(){var e=[],t;n.each(function(t,n,r){e.push(r+",")});return"{"+e.sort().join("").slice(0,-1)+"}"};this.toString=function(){return this.keyify()};this.add=function(){n.addItems(r.call(arguments,0));i=n.items();return this};this.remove=function(){n.removeItems(r.call(arguments,0));i=n.items();return this};this.addItems=function(e){n.addItems(e);i=n.items();return this};this.removeItems=function(e){n.removeItems(e);i=n.items();return this};this.copy=function(){return new a(i,t)};this.size=function(){return n.size()};this.has=function(e){return n.has(e)}}function f(e,n){function u(e,t){var n=o(e),t=typeof t==="undefined"?1:t;if(r[n]){r[n].freq+=t}else{r[n]={item:e,freq:t};i++}s=Math.max(s,r[n].freq);return this}function a(e){var t=o(e);if(r[t]){delete r[t];i--}return this}var r=Object.create(null),i=0,s=0,e=typeof e==="string"?e.split(""):e,o=function(){return typeof n==="undefined"?function(e){var t=e.hkey,n=typeof t;return n==="undefined"?e:n==="function"?t.call(e):t}:typeof n==="function"?function(e){return n.call(e)}:function(e){return e[n]}}();e&&e.forEach(function(e){u(e)});this.addItems=function(e){e.forEach(function(e){u(e)});return this};this.removeItems=function(e){e.forEach(function(e){a(e)});return this};this.copy=function(){return(new f(null,n)).merge(this)};this.normalize=function(e){var t,e=typeof e==="undefined"?1:e;for(t in r){r[t].freq=e}s=e;return this};this.each=function(e,t){for(var n in r){if(e.call(t,r[n].item,r[n].freq,n))break}return this};this.has=function(e){var n=o(e);return r[n]===t?false:true};this.size=function(){return i};this.max=function(){return s};this.freq=function(e){var n=o(e);return r[n]===t?0:r[n].freq};this.merge=function(e){e.each(function(e,t){u(e,t)});return this}}var r=Array.prototype.slice,i=function(){var e=Object.prototype.toString,t=function(){var e=/\[object (\w+)\]/;return function(t){return e.exec(Object.prototype.toString.call(t))[1]}}(),n=["Null","Undefined","Array","Boolean","Number","String","Object","Function","Date","Error","RegExp","Arguments","Math","JSON"],r=Object.create(null);n.forEach(function(e,t){r[e]=t});return function(n){var i=t(n);return r[i]||i}}();a.wrapObj=o;a.isWrapped=u;a.prototype={union:function(e){return this.process(e,function(e){return true})},intersection:function(e){return this.process(e,function(e){return e===3})},difference:function(e){return this.process(e,function(e){return e<3})},complement:function(e){return this.process(e,function(e){return e==1})},equals:function(e){var t=this.process(e);return t.min()===3&&t.max()===3},constructor:a};a.process=function(e,t,n){var r=Object.create(null),i=[],s;e.forEach(function(e){if(!r[e]){r[e]={value:e,freq:1}}});t.forEach(function(e){if(r[e]){if(r[e].freq===1)r[e].freq=3}else{r[e]={value:e,freq:2}}});if(n){for(s in r){if(n(r[s].freq))i.push(r[s].value)}return i}else{return r}};a.union=function(e,t){return a.process(e,t,function(e){return true})};a.intersection=function(e,t){return a.process(e,t,function(e){return e===3})};a.difference=function(e,t){return a.process(e,t,function(e){return e<3})};a.complement=function(e,t){return a.process(e,t,function(e){return e===1})};a.equals=function(e,t){var n=0,r=Math.pow(2,53),i,s=a.process(e,t);for(var i in s){n=Math.max(n,s[i].freq);r=Math.min(r,s[i].freq)}return r===3&&n===3};e.Set=a;f.wrapObj=o;f.isWrapped=u;f.prototype={add:function(){this.addItems(r.call(arguments,0));return this},remove:function(){this.removeItems(r.call(arguments,0));return this},items:function(){return this.map(function(e){return e})},frequencies:function(){return this.map(function(e,t){return t})},keys:function(){return this.map(function(e,t,n){return n})},unwrap:function(){return this.map(function(e){return u(e)?e.item:e})},min:function(){return Math.min.apply(null,this.frequencies())},ge:function(e){var t=[];this.each(function(n,r){r>=e&&t.push(n)});return t},le:function(e){var t=[];this.each(function(n,r){r<=e&&t.push(n)});return t},eq:function(e){var t=[];this.each(function(n,r){r===e&&t.push(n)});return t},total:function(){return this.reduce(function(e,t){return e+t},0)},average:function(){return this.total()/this.size()},entropy:function(){var e=this.total();return this.reduce(function(t,n){var r=n/e;return t-r*Math.log2(r)},0)},bits:function(e){return this.total()*(e?Math.log2(e>1?e:this.size()):this.entropy())},equals:function(e){return this.keyify()===e.keyify()},map:function(e,t){var n=[];this.each(function(t,r,i){n.push(e.call(this,t,r,i))},t);return n},reduce:function(e,t){return this.frequencies().reduce(function(t,n){return e(t,n)},t)},keyify:function(){var e=[],t;this.each(function(t,n,r){e.push(r+":"+n+",")});return"{"+e.sort().join("").slice(0,-1)+"}"},toString:function(){return this.keyify()},constructor:f};e.Histogram=f})(window.swiftSet=window.swiftSet||{})