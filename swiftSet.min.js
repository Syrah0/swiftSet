(function(e){"use strict";function t(){return"swiftSet v0.10.1 MIT License Â© 2014 James Abney http://github.com/jabney/swiftSet"}function s(e,t){this.item=e;this.toString=t?t:function(){return"("+e+":"+i(e)+")"}}function o(e){return function(t){return new s(t,e)}}function u(e){return e instanceof s}function a(e,t){var n=false;this.hist=Object.create(null);this.uid=function(){return typeof t==="undefined"?function(){return this}:function(){return t.call(this)}}();e&&this.add.apply(this,e);this.process=function(e,i){var e=e instanceof a?e.items():e,s;t&&a.pushUid(t);s=a.process(this.items(),e,i);t&&a.popUid();n&&r(s)==="Array"&&this.clear(s);return s};this.clone=function(){return new a(this.items(),t)};this.mutable=function(){n=true;return this}}var n=Array.prototype.slice,r=function(){var e=/\[object (\w+)\]/;return function(t){return e.exec(toString.call(t))[1]}}(),i=function(){var e=Object.prototype.toString,t=["Null","Undefined","Array","Boolean","Number","String","Object","Function","Date","Error","RegExp","Arguments","Math","JSON"],n=Object.create(null);t.forEach(function(e,t){n[e]=t});return function(t){var i=r(t),s=n[i];return s===undefined?i:s}}();a.wrapObj=o;a.isWrapped=u;a.prototype={add:function(){n.call(arguments,0).forEach(function(e){var t=this.uid.call(e),n=this.hist[t];if(!n){n=Object.create(null);n.item=e;n.freq=1;this.hist[t]=n;}},this);return this},remove:function(){n.call(arguments,0).forEach(function(e){var t=this.uid.call(e);if(this.hist[t]){delete this.hist[t]}},this);return this},addItems:function(e){this.add.apply(this,e);return this},removeItems:function(e){this.remove.apply(this,e);return this},clear:function(e){this.hist=Object.create(null);e&&this.addItems(e);return this},each:function(e,t){for(var n in this.hist){if(e.call(t,this.hist[n].item))break}return this},map:function(e,t){var n=[];this.each(function(t){n.push(e.call(this,t))},t);return n},items:function(){return this.map(function(e){return e})},keyify:function(){var e=[],t;this.each(function(t){var n=this.uid.call(t);e.push(n+":"+i(t)+",")},this);return"{"+e.sort().join("").slice(0,-1)+"}"},unwrap:function(){return this.map(function(e){return u(e)?e.item:e},this)},toString:function(){return this.keyify()},size:function(){return this.items().length},has:function(e){var t=this.uid.call(e),e=this.hist[t]&&this.hist[t].item;return e&&true||false},union:function(e){return this.process(e,function(e){return true})},intersection:function(e){return this.process(e,function(e){return e===3})},difference:function(e){return this.process(e,function(e){return e<3})},complement:function(e){return this.process(e,function(e){return e==1})},equals:function(e){var t=this.process(e),n,r=0,i=Math.pow(2,53);for(n in t){r=Math.max(r,t[n].freq);i=Math.min(i,t[n].freq)}return i===3&&r===3},constructor:a};(function(){var e=[],t;e.push(t=function(){return this});a.pushUid=function(n){e.push(n);t=n;return n};a.popUid=function(){var n;e.length>1&&(n=e.pop());t=e[e.length-1];return n||null};a.process=function(e,n,r){var i=Object.create(null),s=[],o,u;e.forEach(function(e){o=t.call(e);if(!i[o]){i[o]={value:e,freq:1}}});n.forEach(function(e){o=t.call(e);if(i[o]){if(i[o].freq===1)i[o].freq=3}else{i[o]={value:e,freq:2}}});if(r){for(u in i){if(r(i[u].freq))s.push(i[u].value)}return s}else{return i}};a.union=function(e,t){return a.process(e,t,function(e){return true})};a.intersection=function(e,t){return a.process(e,t,function(e){return e===3})};a.difference=function(e,t){return a.process(e,t,function(e){return e<3})};a.complement=function(e,t){return a.process(e,t,function(e){return e===1})};a.equals=function(e,t){var n=0,r=Math.pow(2,53),i,s=a.process(e,t);for(var i in s){n=Math.max(n,s[i].freq);r=Math.min(r,s[i].freq)}return r===3&&n===3}})();e.Set=a})(window.swiftSet=window.swiftSet||{})