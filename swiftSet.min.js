(function(e,t){"use strict";function u(e){return o[e]||e}function a(e){return u(i(e))}function f(e,t){this.item=e;this.toString=t?t:function(){return"("+e+":"+a(e)+")"}}function l(e){return function(t){return new f(t,e)}}function c(e){return e instanceof f}function h(e,t){var r=new p(e,t),i=r.items();this.process=function(e,n){var r=e instanceof h?e.items():e,s=[],o=new p(i,t),e=(new p(r,t)).normalize(2);o.merge(e);if(n){o.each(function(e,t){n(t)&&s.push(e)});return s}else{return o}};this.each=function(e,t){return r.each(function(t){return e.call(this,t)},t)};this.items=function(){return r.items()};this.unwrap=function(){return r.unwrap()};this.keyify=function(){var e=[],t;r.each(function(t,n,r){e.push(r+",")});return"{"+e.sort().join("").slice(0,-1)+"}"};this.toString=function(){return this.keyify()};this.add=function(){r.addItems(n.call(arguments,0));i=r.items();return this};this.remove=function(){r.removeItems(n.call(arguments,0));i=r.items();return this};this.addItems=function(e){r.addItems(e);i=r.items();return this};this.removeItems=function(e){r.removeItems(e);i=r.items();return this};this.copy=function(){return new h(i,t)};this.size=function(){return r.size()};this.has=function(e){return r.has(e)}}function p(e,r){function a(e,t){var n=u(e),t=typeof t==="undefined"?1:t;if(i[n]){i[n].count+=t}else{i[n]={item:e,count:t};s++}o=Math.max(o,i[n].count);return this}function f(e){var t=u(e);if(i[t]){delete i[t];s--}return this}var i=Object.create(null),s=0,o=0,u=function(){return typeof r==="undefined"?function(e){var t=e.key,n=typeof t;return n==="undefined"?e:n==="function"?t.call(e):t}:typeof r==="function"?function(e){return r.call(e)}:function(e){return e[r]}}();e&&e.forEach(function(e){a(e)});this.addItems=function(e){e.forEach(function(e){a(e)});return this};this.removeItems=function(e){e.forEach(function(e){f(e)});return this};this.add=function(){this.addItems(n.call(arguments,0));return this};this.remove=function(){this.removeItems(n.call(arguments,0));return this};this.copy=function(){return(new p(null,r)).merge(this)};this.normalize=function(e){var t,e=typeof e==="undefined"?1:e;for(t in i){i[t].count=e}o=e;return this};this.each=function(e,t){for(var n in i){if(e.call(t,i[n].item,i[n].count,n))break}return this};this.has=function(e){var n=u(e);return i[n]===t?false:true};this.size=function(){return s};this.max=function(){return o};this.count=function(e){var n=u(e);return i[n]===t?0:i[n].count};this.merge=function(e){e.each(function(e,t){a(e,t)});return this}}var n=Array.prototype.slice,r=Object.prototype.toString,i=function(){var e=/\[object (\w+)\]/;return function(n){return e.exec(Object.prototype.toString.call(n))[1]}}(),s=["Null","Undefined","Array","Boolean","Number","String","Object","Function","Date","Error","RegExp","Arguments","Math","JSON"],o=Object.create(null);s.forEach(function(e,t){o[e]=t});h.wrapObj=l;h.isWrapped=c;h.prototype={union:function(e){return this.process(e,function(e){return true})},intersection:function(e){return this.process(e,function(e){return e===3})},difference:function(e){return this.process(e,function(e){return e<3})},complement:function(e){return this.process(e,function(e){return e==1})},equals:function(e){var t=this.process(e);return t.min()===3&&t.max()===3},constructor:h};h.process=function(e,t,n){var r=Object.create(null),i=[],s;e.forEach(function(e){if(!r[e]){r[e]={value:e,count:1}}});t.forEach(function(e){if(r[e]){if(r[e].count===1)r[e].count=3}else{r[e]={value:e,count:2}}});if(n){for(s in r){if(n(r[s].count))i.push(r[s].value)}return i}else{return r}};h.union=function(e,t){return h.process(e,t,function(e){return true})};h.intersection=function(e,t){return h.process(e,t,function(e){return e===3})};h.difference=function(e,t){return h.process(e,t,function(e){return e<3})};h.complement=function(e,t){return h.process(e,t,function(e){return e===1})};h.equals=function(e,t){var n=0,r=Math.pow(2,53),i,s=h.process(e,t);for(var i in s){n=Math.max(n,s[i].count);r=Math.min(r,s[i].count)}return r===3&&n===3};e.Set=h;p.wrapObj=l;p.isWrapped=c;p.prototype={items:function(){return this.map(function(e){return e})},counts:function(){return this.map(function(e,t){return t})},keys:function(){return this.map(function(e,t,n){return n})},unwrap:function(){return this.map(function(e){return c(e)?e.item:e})},min:function(){return Math.min.apply(null,this.counts())},total:function(){return this.reduce(function(e,t){return e+t},0)},average:function(){return this.total()/this.size()},equals:function(e){return this.keyify()===e.keyify()},map:function(e,t){var n=[];this.each(function(t,r,i){n.push(e.call(this,t,r,i))},t);return n},reduce:function(e,t){return this.counts().reduce(function(t,n){return e(t,n)},t)},keyify:function(){var e=[],t;this.each(function(t,n,r){e.push(r+":"+n+",")});return"{"+e.sort().join("").slice(0,-1)+"}"},toString:function(){return this.keyify()},constructor:p};e.Histogram=p})(window.swiftSet=window.swiftSet||{})